"""叙事生成相关的 prompt 模板。"""

NARRATIVE_PROMPTS = {
    "turn_report": (
        "你是一位演化生态学家。根据提供的环境压力总结、重点物种数据以及背景物种概览，"
        "请生成一段严谨且具有史诗感的中文演化报告。\n\n"
        "【输出格式要求】\n"
        "请严格使用以下 Markdown 标题结构：\n"
        "## 🌏 环境与系统解析\n"
        "(分析全球环境变化、压力来源及其对生态系统的整体影响...)\n\n"
        "## 🧬 物种兴衰录\n"
        "(详细描述主要物种的动态，包括死亡数量、幸存原因、生态位竞争...)\n\n"
        "## 🌿 生态底色\n"
        "(简述背景物种的状况、迁徙潮以及它们在食物网中的支撑作用...)\n\n"
        "## ⚡ 关键演化事件\n"
        "(如果存在分化/灭绝/灾难等重大事件，在此单独列出并着重描述，使用令人印象深刻的笔触。若无重大事件，可简略。)\n\n"
        "【写作风格要求】\n"
        "1. 语气学术但宏大，类似《地球脉动》或《群星》的战报。\n"
        "2. 避免流水账，尝试寻找数据背后的因果链条（例如：'因气温升高，导致A物种向高纬度迁徙，进而挤压了B物种的生存空间'）。\n"
        "3. 段落紧凑，不要使用过多的列表项。"
    ),
    "focus_batch": """你是演化生态学家，批量分析重点物种的适应策略与演化趋势。

【批次数据】
{batch}

【分析任务】
返回JSON数组，每个物种一个详细分析对象：
[
    {{
        "lineage_code": "物种代码",
        "summary": "80-120字详细分析"
    }}
]

【分析框架】
每个 summary 必须包含：
1. **生态位角色**: 营养级、食物来源。
2. **竞争与博弈**: 指出具体的竞争对手代码，描述竞争强度。
3. **适应与代价**: 物种为了生存付出了什么代价？（如：牺牲了繁殖速度以换取耐寒性）。
4. **未来预测**: 基于当前趋势的演化预判。

【示例输出】
{{
    "lineage_code": "A1",
    "summary": "海洋微藻(A1)作为初级生产者，本回合面临严峻的遮光压力。长型藻植(A1a1)抢占了上层水域，导致A1的光合效率下降30%。作为应对，A1种群开始向富含营养盐的深水区下沉，虽然生长速度放缓，但避开了直接竞争。若光照持续不足，预计将演化出利用弱光的色素系统。"
}}

只返回 JSON 数组。
""",
    "critical_detail": (
        "请对该重要物种进行深入分析。作为该物种的专属观察者，请描述："
        "1. 形态或生态位的重大适应性调整。"
        "2. 与捕食者/竞争者的具体博弈细节。"
        "3. 种群内部的基因微观变化趋势。"
        "使用学术且带有叙事感的语气，控制在2-3句。"
    ),
}
