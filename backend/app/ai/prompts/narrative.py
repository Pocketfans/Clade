"""叙事生成相关的 prompt 模板。"""

NARRATIVE_PROMPTS = {
    "turn_report": (
        "你是一位演化生态学家。根据提供的环境压力总结、重点物种数据以及背景物种概览，"
        "请生成一段严谨的中文报告，包含：\n"
        "1. 环境压力及系统解析\n"
        "2. 各主要物种的死亡数量、幸存原因、生态位变化\n"
        "3. 背景物种或迁徙策略在生态网中的作用\n"
        "4. 若有重大事件（分化/灭绝/迁徙），需单独描述。\n"
        "确保语气学术、段落紧凑。"
    ),
    "focus_batch": """你是演化生态学家，批量分析重点物种的适应策略与演化趋势。

【批次数据】
{batch}

【分析任务】
返回JSON数组，每个物种一个详细分析对象：
[
    {{
        "lineage_code": "物种代码",
        "summary": "80-120字详细分析"
    }}
]

【分析框架（每个物种的summary必须包含以下要素）】
1. 【生态位角色】：该物种在生态系统中的位置（生产者/消费者/分解者，营养级）
2. 【竞争关系】：与批次中哪些物种存在生态位重叠？竞争激烈程度如何？
3. 【适应策略】：针对当前环境压力（温度/干旱/火山等）采取的生存策略
4. 【演化趋势】：基于死亡率和资源压力，预测可能的演化方向（分化/灭绝/稳定）

【示例输出（仅供参考格式）】
{{
    "lineage_code": "A1",
    "summary": "海洋微藻作为初级生产者，通过光合作用支撑整个生态系统基础。当前与长型藻植（A1a1）存在中等生态位重叠（0.10），竞争浅海光照资源。面对干旱压力，其死亡率升至22.6%，高资源饱和度（1.32）驱动种群向深海分化，发展弱光适应能力。若压力持续，可能分化为深海型和浅海耐旱型两个亚群。"
}}

【质量要求】
- 每个summary必须80-120字（不可过短）
- 具体指出竞争对手的物种名称或代码
- 基于实际数据（死亡率、资源压力、重叠度）进行分析
- 使用专业生态学术语，但保持易懂
- 必须为每个物种生成独特的分析，避免模板化

只返回JSON数组，不要任何解释文字。
""",
    "critical_detail": (
        "请对该重要物种进行深入分析，包括：形态或生态位的重大变化、"
        "与捕食者/竞争者的博弈、可能的演化分支。使用学术语气，控制在2-3句。"
    ),
}

