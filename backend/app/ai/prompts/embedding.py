"""Embedding 扩展模块的 prompt 模板。

包含：
- 演化叙事生成
- 演化解释生成
- 智能问答
- 演化预测描述
"""

EMBEDDING_PROMPTS = {
    # ==================== 叙事生成 ====================
    "embedding_narrative": """你是一位演化纪录片解说员，请根据以下事件生成一段富有故事性的演化叙事。

【本回合事件】
{events_description}

【历史相似事件参考】（避免重复表述）
{similar_events}

【写作要求】
1. 用富有故事性的语言描述这些事件，就像《地球脉动》的解说词
2. 如果有标记【新】的事件，重点描述其独特性和历史意义
3. 如果与历史事件相似，可以提及"这让人想起...""历史再次重演"等表述
4. 突出因果关系和演化趋势
5. 150-200字，连贯自然，不使用列表格式

【示例风格】
"在这个关键的回合中，一场突如其来的寒潮席卷了北部海域。面对骤降的温度，海洋微藻群落经历了前所未有的考验。一些种群选择了向南迁徙，而另一些则在原地演化出了抗冻蛋白——这与三个回合前的热带风暴后的适应辐射如出一辙。"
""",

    # ==================== 物种传记 ====================
    "embedding_biography": """请为以下物种生成一段演化传记，讲述它从诞生到现在的生命历程。

【物种档案】
名称: {species_name} ({latin_name})
描述: {description}
创建回合: {created_turn}
当前状态: {status}
祖先: {parent_code}

【演化历程事件】
{events_timeline}

【写作要求】
请用叙事性的语言描述这个物种的演化历程，包括：
1. 起源故事：它从何而来？为何分化出来？
2. 关键转折点：经历过哪些重大演化事件？
3. 适应策略：如何应对环境变化？
4. 当前地位：在生态系统中扮演什么角色？

200-300字，像传记一样讲述这个物种的"一生"。
""",

    # ==================== 演化解释 ====================
    "embedding_explanation": """请解释以下物种的演化原因，回答"为什么这个物种会演化成这样？"

【物种信息】
名称: {species_name} ({latin_name})
描述: {description}
祖先: {parent_code}
栖息地: {habitat_type}
营养级: T{trophic_level}

【关键特征】
{key_factors}

【相关演化事件】
{related_events}

【分类位置】
{taxonomy_info}

【解释要求】
请解释：
1. 为什么这个物种演化出了这些特征？
2. 哪些环境因素起了关键作用？
3. 这些适应性特征如何帮助它生存？
4. 与同类群物种相比有何独特之处？

用通俗易懂的语言，像科普文章一样解释，150-250字。
""",

    # ==================== 智能问答 ====================
    "embedding_qa": """你是一位博学的生态学顾问，请根据以下游戏世界的信息回答玩家的问题。

【相关信息库】
{context}

【玩家问题】
{question}

【回答要求】
1. 直接回答问题，不要说"根据信息"之类的开场白
2. 用通俗易懂但专业的语言
3. 如果可以，引用具体的物种名称或事件作为例证
4. 如果信息不足以完全回答，诚实说明并给出推测
5. 100-200字

【示例问答】
问：为什么深海物种都有发光器官？
答：深海是一个完全黑暗的环境，光线无法穿透数百米的海水。在这种条件下，生物发光成为了一种重要的生存策略。一些物种用它来吸引猎物（如深海鮟鱇），另一些用它来迷惑捕食者或寻找配偶。在当前的生态系统中，深海热泉细菌虽然不发光，但它们的存在为整个深海食物链提供了能量基础。
""",

    # ==================== 演化预测描述 ====================
    "embedding_prediction": """请根据向量演化预测结果，生成一段关于物种未来可能演化方向的描述。

【原始物种】
名称: {species_name}
描述: {description}

【演化压力】
{pressure_descriptions}

【参考形态】（向量空间中相似的物种）
{reference_species}

【预测的特征变化】
{predicted_traits}

【生成要求】
请生成一段描述，预测该物种在这些压力下可能演化出的后代形态：
1. 结合压力类型推测可能的适应性变化
2. 参考相似物种的成功策略
3. 保持生物学合理性（属性权衡、渐进演化）
4. 描述具体的形态和行为变化
5. 100-150字

【示例输出】
"面对持续的寒冷压力，这个物种的后代很可能演化出更厚的脂肪层和更密的绒毛。参考极地鱼类的适应策略，体液中可能出现抗冻蛋白。然而，这些保温适应需要更多能量维持，繁殖速度可能下降。形态上可能变得更加圆润紧凑，减少散热面积。"
""",

    # ==================== 物种对比分析 ====================
    "embedding_compare": """请对比分析以下两个物种，找出它们的异同和可能的生态关系。

【物种A】
名称: {species_a_name}
描述: {species_a_description}
栖息地: {species_a_habitat}
营养级: T{species_a_trophic}

【物种B】
名称: {species_b_name}
描述: {species_b_description}
栖息地: {species_b_habitat}
营养级: T{species_b_trophic}

【向量相似度分析】
整体相似度: {similarity:.2%}
特征差异: {trait_differences}

【分析要求】
请分析：
1. 这两个物种在形态和生态上有何异同？
2. 它们之间可能存在什么关系？（竞争、捕食、共生、无关）
3. 如果是趋同演化，解释为什么不同起源会演化出相似特征
4. 如果有生态位重叠，预测可能的竞争结果

150-200字，客观分析。
""",

    # ==================== 时代总结 ====================
    "embedding_era_summary": """请为以下演化时代生成一个宏大的总结叙述。

【时代信息】
时代名称: {era_name}
起始回合: {start_turn} - 结束回合: {end_turn}
关键事件数量: {event_count}

【主要事件】
{key_events}

【时代特征】
{defining_changes}

【写作要求】
请生成一段史诗般的时代总结：
1. 描述这个时代的整体特征和氛围
2. 突出最重要的演化事件
3. 解释这个时代如何塑造了当前的生态系统
4. 使用宏大叙事的风格，像地质年代的科普介绍

200-300字。

【示例风格】
"寒武纪大爆发" 式的宏大叙事：
"这是一个剧变的时代。在短短十个回合内，全球气温骤降导致了第一次大规模灭绝事件，超过60%的物种从海洋中消失。然而，危机也孕育着机遇——幸存者的适应辐射填补了空缺的生态位，一个全新的、以耐寒物种为主导的生态系统开始形成..."
""",
}

